version: "3.3"
services:
  jupyter:
    image: jupyter
    build:
      dockerfile: docker/Dockerfile
      context: .
      target: jupyter
    volumes:
      - ./data:/app/data
      - ./srv:/app/srv
      - ./notebooks:/app/notebooks
      - ./models:/app/models
    ports:
      - "8000:8000"
  devapp:
    image: devapp
    build:
      dockerfile: docker/Dockerfile
      context: .
      target: devapp
    environment:
      PORT: 5000
    volumes:
      - ./data:/app/data
      - ./srv:/app/srv
      - ./models:/app/models
    ports:
      - "5000:5000"
  app:
    image: app
    build:
      dockerfile: docker/Dockerfile
      context: .
      target: app
    environment:
      PORT: 5000
    ports:
      - "5001:5000"
